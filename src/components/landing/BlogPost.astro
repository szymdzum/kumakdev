---
// Type definitions for props
interface Author {
  name: string;
  image: string;
  fallback: string;
  bio: string;
}

// Props interface directly matches the destructured properties
interface Props {
  category: string;
  readTime: string;
  title: string;
  author: Author;
  publishDate: Date;
  featuredImage: string;
  imageAlt: string;
  imageCaption: string;
  tags: string[];
  likeCount: number;
  commentCount: number;
}

const {
  category = "Design",
  readTime = "6 min read",
  title = "The Art of Minimalist Design: Less is More in the Digital Age",
  author = {
    name: "Jane Doe",
    image: "/placeholder.svg?height=40&width=40",
    fallback: "JD",
    bio: "UX Designer and writer with over 8 years of experience creating minimalist, accessible digital experiences. Passionate about design systems and user-centered design.",
  },
  publishDate = new Date("2023-04-15"),
  featuredImage = "/placeholder.svg?height=600&width=1200",
  imageAlt = "Minimalist design workspace with a computer, notebook, and plant",
  imageCaption = 'A clean, minimalist workspace showcasing the "less is more" philosophy',
  tags = ["minimalism", "design", "ux", "accessibility"],
  likeCount = 245,
  commentCount = 42,
} = Astro.props;

// Format date
const formattedDate = new Intl.DateTimeFormat("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
}).format(publishDate);

// Current year for footer
const currentYear = new Date().getFullYear();
---

<div class="min-h-screen bg-gray-950 text-gray-100">
  <!-- Navigation -->
  <header class="sticky top-0 z-10 border-b border-gray-800 bg-gray-950/80 backdrop-blur-md">
    <div class="container mx-auto flex h-16 items-center justify-between px-4">
      <a href="/" class="text-xl font-bold tracking-tight">
        Minimal<span class="text-emerald-500">Blog</span>
      </a>
      <nav class="flex items-center gap-6">
        <a
          href="/blog"
          class="text-sm font-medium text-gray-300 transition-colors hover:text-white"
        >
          Blog
        </a>
        <a
          href="/about"
          class="text-sm font-medium text-gray-300 transition-colors hover:text-white"
        >
          About
        </a>
        <button
          class="rounded-md bg-transparent px-3 py-1.5 text-sm font-medium text-gray-300 hover:text-white"
        >
          Sign In
        </button>
      </nav>
    </div>
  </header>

  <!-- Reading Progress Indicator -->
  <div id="reading-progress-container" class="sticky top-16 z-10 h-1 w-full bg-gray-800">
    <div id="reading-progress" class="h-1 w-0 bg-emerald-500 transition-all duration-100"></div>
  </div>

  <main class="container mx-auto px-4 py-8">
    <!-- Article Header -->
    <article class="mx-auto max-w-3xl">
      <header class="mb-8 space-y-6">
        <div class="space-y-2">
          <div class="flex items-center gap-2 text-sm text-emerald-500">
            <a href={`/category/${category.toLowerCase()}`} class="hover:underline">
              {category}
            </a>
            <span>•</span>
            <span class="text-gray-400">{readTime}</span>
          </div>
          <h1 class="text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl">
            {title}
          </h1>
        </div>

        <div class="flex items-center gap-4">
          <div class="h-10 w-10 overflow-hidden rounded-full border-2 border-emerald-500">
            <img src={author.image} alt={author.name} width="40" height="40" />
          </div>
          <div>
            <div class="font-medium">{author.name}</div>
            <div class="text-sm text-gray-400">
              Published on <time datetime={publishDate.toISOString()}>{formattedDate}</time>
            </div>
          </div>
        </div>
      </header>

      <!-- Featured Image -->
      <figure class="my-8 overflow-hidden rounded-lg">
        <div class="relative aspect-video w-full">
          <img src={featuredImage} alt={imageAlt} class="h-full w-full object-cover" />
        </div>
        <figcaption class="mt-2 text-center text-sm text-gray-400">
          {imageCaption}
        </figcaption>
      </figure>

      <!-- Article Content -->
      <div
        class="prose prose-invert prose-headings:font-bold prose-headings:tracking-tight prose-p:text-gray-300 prose-a:text-emerald-500 prose-blockquote:border-emerald-500 prose-blockquote:text-gray-300 prose-blockquote:not-italic prose-img:rounded-lg mx-auto max-w-none"
      >
        <slot />
      </div>

      <!-- Tags -->
      <div class="mt-8">
        <div class="flex flex-wrap gap-2">
          {
            tags.map((tag) => (
              <a
                href={`/tag/${tag}`}
                class="rounded-full bg-gray-800 px-3 py-1 text-sm text-gray-300 hover:bg-gray-700"
              >
                #{tag}
              </a>
            ))
          }
        </div>
      </div>

      <!-- Article Actions -->
      <div class="mt-8 flex items-center justify-between border-t border-b border-gray-800 py-4">
        <div class="flex items-center gap-4">
          <button
            class="flex items-center gap-2 rounded-md bg-transparent px-3 py-1.5 text-sm text-gray-300 hover:text-white"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="h-4 w-4"
            >
              <path
                d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
              ></path>
            </svg>
            <span>{likeCount}</span>
          </button>
          <button
            class="flex items-center gap-2 rounded-md bg-transparent px-3 py-1.5 text-sm text-gray-300 hover:text-white"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="h-4 w-4"
            >
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span>{commentCount}</span>
          </button>
        </div>
        <div class="flex items-center gap-2">
          <button
            class="flex h-8 w-8 items-center justify-center rounded-md bg-transparent text-gray-300 hover:text-white"
            aria-label="Bookmark this article"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="h-4 w-4"
            >
              <path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
            </svg>
          </button>
          <button
            class="flex h-8 w-8 items-center justify-center rounded-md bg-transparent text-gray-300 hover:text-white"
            aria-label="Share this article"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="h-4 w-4"
            >
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
              <polyline points="16 6 12 2 8 6"></polyline>
              <line x1="12" x2="12" y1="2" y2="15"></line>
            </svg>
          </button>
        </div>
      </div>

      <!-- Author Bio -->
      <div class="mt-8 rounded-lg bg-gray-900 p-6">
        <div class="flex flex-col items-start gap-6 sm:flex-row sm:items-center">
          <div class="h-16 w-16 overflow-hidden rounded-full border-2 border-emerald-500">
            <img src={author.image} alt={author.name} width="64" height="64" />
          </div>
          <div class="space-y-2">
            <h3 class="text-xl font-bold">{author.name}</h3>
            <p class="text-gray-400">{author.bio}</p>
            <div class="flex gap-2">
              <a
                href="https://twitter.com"
                class="flex h-8 items-center gap-2 rounded-md border border-gray-700 px-3 py-1.5 text-sm text-gray-300 hover:border-gray-500 hover:text-white"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="h-4 w-4"
                >
                  <path
                    d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"
                  ></path>
                </svg>
                <span>Follow</span>
              </a>
              <a
                href="https://linkedin.com"
                class="flex h-8 items-center gap-2 rounded-md border border-gray-700 px-3 py-1.5 text-sm text-gray-300 hover:border-gray-500 hover:text-white"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="h-4 w-4"
                >
                  <path
                    d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"
                  ></path>
                  <rect width="4" height="12" x="2" y="9"></rect>
                  <circle cx="4" cy="4" r="2"></circle>
                </svg>
                <span>Connect</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </article>

    <!-- Related Articles -->
    <section class="mx-auto mt-16 max-w-3xl">
      <h2 class="mb-6 text-2xl font-bold tracking-tight">Related Articles</h2>
      <div class="grid gap-6 sm:grid-cols-2">
        <a href="/blog/accessibility-first-design" class="group">
          <div
            class="space-y-2 rounded-lg border border-gray-800 p-4 transition-colors hover:bg-gray-900"
          >
            <div class="relative aspect-video w-full overflow-hidden rounded-md">
              <img
                src="/placeholder.svg?height=200&width=400"
                alt="Accessibility First Design"
                class="h-full w-full object-cover transition-transform group-hover:scale-105"
              />
            </div>
            <h3 class="font-bold group-hover:text-emerald-500">
              Accessibility First Design: Building for Everyone
            </h3>
            <p class="text-sm text-gray-400">
              How to incorporate accessibility from the beginning of your design process
            </p>
          </div>
        </a>
        <a href="/blog/typography-in-design" class="group">
          <div
            class="space-y-2 rounded-lg border border-gray-800 p-4 transition-colors hover:bg-gray-900"
          >
            <div class="relative aspect-video w-full overflow-hidden rounded-md">
              <img
                src="/placeholder.svg?height=200&width=400"
                alt="Typography in Design"
                class="h-full w-full object-cover transition-transform group-hover:scale-105"
              />
            </div>
            <h3 class="font-bold group-hover:text-emerald-500">
              The Power of Typography in Modern Web Design
            </h3>
            <p class="text-sm text-gray-400">
              How font choices impact readability, brand perception, and user experience
            </p>
          </div>
        </a>
      </div>
    </section>

    <!-- Newsletter -->
    <section class="mx-auto mt-16 max-w-3xl rounded-lg bg-gray-900 p-8">
      <div class="text-center">
        <h2 class="mb-2 text-2xl font-bold tracking-tight">Stay updated</h2>
        <p class="mb-6 text-gray-400">
          Get notified when we publish new articles on design and accessibility
        </p>
        <div class="mx-auto flex max-w-md flex-col gap-2 sm:flex-row">
          <input
            type="email"
            placeholder="Enter your email"
            class="flex-grow rounded-md border border-gray-700 bg-gray-800 px-4 py-2 text-white placeholder:text-gray-500 focus:border-emerald-500 focus:outline-none"
            aria-label="Email address"
          />
          <button class="rounded-md bg-emerald-600 px-4 py-2 text-white hover:bg-emerald-700"
            >Subscribe</button
          >
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="mt-16 border-t border-gray-800 bg-gray-950">
    <div class="container mx-auto px-4 py-8">
      <div class="flex flex-col items-center justify-between md:flex-row">
        <div class="mb-4 md:mb-0">
          <a href="/" class="text-xl font-bold tracking-tight">
            Minimal<span class="text-emerald-500">Blog</span>
          </a>
          <p class="mt-1 text-sm text-gray-500">Clarity through simplicity</p>
        </div>

        <nav class="flex gap-6">
          <a href="/blog" class="text-sm text-gray-400 hover:text-white"> Blog </a>
          <a href="/about" class="text-sm text-gray-400 hover:text-white"> About </a>
          <a href="/contact" class="text-sm text-gray-400 hover:text-white"> Contact </a>
        </nav>
      </div>

      <div
        class="mt-8 flex flex-col items-center justify-between border-t border-gray-800 pt-6 md:flex-row"
      >
        <p class="text-sm text-gray-500">© {currentYear} MinimalBlog. All rights reserved.</p>

        <div class="mt-4 flex gap-4 md:mt-0">
          <a href="/privacy" class="text-xs text-gray-500 hover:text-gray-400"> Privacy Policy </a>
          <a href="/terms" class="text-xs text-gray-500 hover:text-gray-400"> Terms of Service </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Floating Share Button (Mobile) -->
  <div class="fixed right-6 bottom-6 md:hidden">
    <button
      class="flex h-12 w-12 items-center justify-center rounded-full bg-emerald-600 shadow-lg hover:bg-emerald-700"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="h-5 w-5"
      >
        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
        <polyline points="16 6 12 2 8 6"></polyline>
        <line x1="12" x2="12" y1="2" y2="15"></line>
      </svg>
      <span class="sr-only">Share this article</span>
    </button>
  </div>
</div>

<script>
  // Reading progress indicator
  document.addEventListener("DOMContentLoaded", () => {
    const progressBar = document.getElementById("reading-progress");
    const article = document.querySelector("article");

    if (progressBar && article) {
      const updateProgress = () => {
        const scrollPosition = window.scrollY;
        const articleTop = article.offsetTop;
        const articleHeight = article.offsetHeight;
        const windowHeight = window.innerHeight;

        // Calculate reading progress percentage
        const totalDistance = articleHeight - windowHeight;
        const currentProgress = Math.max(
          0,
          Math.min(1, (scrollPosition - articleTop) / totalDistance)
        );

        // Update progress bar width
        progressBar.style.width = `${currentProgress * 100}%`;
      };

      // Add scroll event listener
      window.addEventListener("scroll", updateProgress);

      // Initialize progress
      updateProgress();
    }
  });
</script>
