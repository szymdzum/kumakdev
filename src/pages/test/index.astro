---
import { getBlogPosts } from "./astra";
import Layout from "@layouts/Layout.astro";

const recentPosts = await getBlogPosts({
  limit: 3,
  sortBy: "pubDate",
  sortOrder: "desc",
  filter: { draft: false },
});
---

<Layout title="Test Page" description="Testing the Astra content API">
  <h1>Test</h1>

  <div>
    <h2>Recent Blog Posts</h2>
    <ul>
      {
        recentPosts.map((post) => (
          <li>
            <a href={`/blog/${post.slug}`}>{post.data.title}</a>
          </li>
        ))
      }
    </ul>
  </div>
</Layout>
